import{u as h,a4 as x,a5 as w,w as t,an as S,o as k,b as a,d as e,aO as B,aM as i,at as p,R as F,a7 as M}from"./index-D_0czRUK.js";import{c as y,a as m,u as C,e as c,V as N}from"./vee-validate.esm-wBYaJMn2.js";import{v as R}from"./index-BOpIxFmQ.js";import{V as U}from"./VContainer-s4UdsHl3.js";import{V as d}from"./VCol-DJ1MM7fx.js";import{V as q}from"./VDivider-BGWnpmqK.js";import{V as A}from"./VRow-D0UlcKv2.js";const T=p("h1",{class:"text-center"},"登入",-1),$={class:"text-center"},I={__name:"login",setup(D){const V=S(),f=h(),g=x(),v=y({account:m().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",o=>R.isAlphanumeric(o)),password:m().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),{handleSubmit:_,isSubmitting:u}=C({validationSchema:v}),r=c("account"),l=c("password"),b=_(async o=>{const s=await f.login(o);s==="登入成功"?(g({text:"登入成功",snackbarProps:{color:"green"}}),V.push("/")):alert(s)});return(o,s)=>(k(),w(U,null,{default:t(()=>[a(A,null,{default:t(()=>[a(d,{cols:"12"},{default:t(()=>[T]),_:1}),a(q),a(d,{cols:"12"},{default:t(()=>[a(N,{disabled:e(u),onSubmit:B(e(b),["prevent"])},{default:t(()=>[a(i,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(r).value.value,"onUpdate:modelValue":s[0]||(s[0]=n=>e(r).value.value=n),"error-messages":e(r).errorMessage.value},null,8,["modelValue","error-messages"]),a(i,{label:"密碼",minlength:"4",maxlength:"20",counter:"",type:"password",modelValue:e(l).value.value,"onUpdate:modelValue":s[1]||(s[1]=n=>e(l).value.value=n),"error-messages":e(l).errorMessage.value},null,8,["modelValue","error-messages"]),p("div",$,[a(F,{type:"submit",color:"green",loading:e(u)},{default:t(()=>[M("登入")]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{I as default};
